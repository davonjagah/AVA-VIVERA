!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.HubtelCheckout=n():e.HubtelCheckout=n()}(this,()=>(()=>{"use strict";var e={494:(e,n)=>{n.A=class{constructor(e){this.baseUrl="https://unified-pay.hubtel.com",e&&(this.baseUrl=e)}redirect({purchaseInfo:e,config:n}){const t=this.createCheckoutUrl(e,n);window.open(t)}initIframe({purchaseInfo:e,callBacks:n,config:t,iframeStyle:o}){var i,r,d;this.registerEvents(n);const a=document.getElementById("hubtel-checkout-iframe");if(!a)return;a.innerHTML="";const l=document.createElement("div");l.textContent="Loading...",a.appendChild(l);const s=document.createElement("iframe");s.setAttribute("id","hubtel-iframe-element"),s.src=this.createCheckoutUrl(e,t),s.style.display="none",s.style.width=null!==(i=null==o?void 0:o.width)&&void 0!==i?i:"100%",s.style.height=null!==(r=null==o?void 0:o.height)&&void 0!==r?r:"100%",s.style.minHeight=(null==o?void 0:o.minHeight)||"400px",s.style.border=null!==(d=null==o?void 0:o.border)&&void 0!==d?d:"none",s.onload=()=>{var e;a.removeChild(l),s.style.display="block",null===(e=n.onLoad)||void 0===e||e.call(n)},a.appendChild(s)}openModal({purchaseInfo:e,callBacks:n,config:t}){this.injectStyles(),this.createIframe(),this.handleBackButton(),this.registerEvents(n),this.renderWebpageInPopup(this.createCheckoutUrl(e,t),n.onClose,n.onLoad)}createCheckoutUrl(e,n){const t=Object.assign(Object.assign({},e),n),o=Object.keys(t).reduce((e,n)=>(null!==t[n]&&void 0!==t[n]&&(e[n]=t[n]),e),{}),i=Object.keys(o).map(e=>`${e}=${encodeURIComponent(o[e])}`).join("&"),r=this.encodeBase64(i),d=encodeURIComponent(r);return`${"disabled"===(null==o?void 0:o.branding)?`${this.baseUrl}/pay/direct`:`${this.baseUrl}/pay`}?p=${d}`}createIframe(){let e=document.createElement("div");e.setAttribute("id","backdrop"),e.classList.add("backdrop");const n=document.createElement("span");n.classList.add("checkout-loader"),e.appendChild(n),document.body.appendChild(e)}encodeBase64(e){return btoa(unescape(encodeURIComponent(e)))}handleBackButton(){window.addEventListener("popstate",e=>{this.closePopUp()})}registerEvents(e){window.addEventListener("message",n=>{var t,o,i,r,d,a;if(n.origin!==this.baseUrl)return;const{data:l}=n;if(!0===l.success)null===(t=e.onPaymentSuccess)||void 0===t||t.call(e,l);else if(!1===l.success)null===(o=e.onPaymentFailure)||void 0===o||o.call(e,l);else if(l.initialized)null===(i=e.init)||void 0===i||i.call(e,l),null===(r=e.onInit)||void 0===r||r.call(e,l);else if(l.feesChanged)null===(d=e.onFeesChanged)||void 0===d||d.call(e,l.fees);else if(l.resize){const n=document.getElementById("hubtel-iframe-element");n&&(n.style.height=l.height+"px"),null===(a=null==e?void 0:e.onResize)||void 0===a||a.call(e,l)}},!1)}renderWebpageInPopup(e,n,t){const o=document.createElement("div");o.classList.add("checkout-modal");const i=document.createElement("div");i.setAttribute("id","checkout-close-icon"),i.innerHTML="&times;",i.classList.add("close-icon"),i.addEventListener("click",()=>{this.closePopUp(),null==n||n()}),o.appendChild(i);const r=document.createElement("iframe");r.src=e,history.pushState({modalOpen:!0},""),r.classList.add("iframe"),o.appendChild(r),document.body.appendChild(o),o.style.opacity="0",r.addEventListener("load",()=>{o.style.opacity="1",null==t||t()})}closePopUp(){const e=document.querySelector(".backdrop"),n=document.querySelector(".checkout-modal");e&&document.body.removeChild(e),n&&document.body.removeChild(n),history.replaceState(null,""),window.removeEventListener("popstate",this.closePopUp)}injectStyles(){const e=document.createElement("style");e.type="text/css",e.innerHTML="\n        .backdrop {\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.5);\n            z-index: 2147483647;\n        }\n\n        .loader {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            z-index: 10000;\n            /* Your loader styles */\n        }\n\n        .checkout-modal {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            width: 90%;\n            height: 90%;\n            padding-top: 20px;\n            max-width: 480px;\n            background-color: #fff;\n            border-radius: 10px;\n            z-index: 65675656565;\n            transition: opacity 0.5s ease, transform 0.5s ease;\n            opacity: 0;\n        }\n\n        .close-icon {\n            position: absolute;\n            top: 10px;\n            width: 25px;\n            height: 25px;\n            font-size: 20px;\n            right: 10px;\n            cursor: pointer;\n            color: #fff;\n            background-color: #000;\n            text-align: center;\n            border-radius: 50%;\n        }\n\n        .iframe {\n            width: 100%;\n            height: calc(100% - 20px);\n            border: none;\n        }\n\n        .checkout-loader {\n          width: 30px;\n          height: 30px;\n          border: 3px solid #FFF;\n          border-bottom-color: #42b883;\n          border-radius: 50%;\n          display: inline-block;\n          box-sizing: border-box;\n          position : fixed;\n          top : 50%;\n          left : 50%;\n          transform : translate(-50%, -50%); \n          z-index : 10000;\n          animation: rotation 1s linear infinite;\n      }\n\n      @keyframes rotation {\n          0% {\n              transform: rotate(0deg);\n          }\n          100% {\n              transform: rotate(360deg);\n          }\n      }\n\n      @media screen and (max-width: 600px) {\n          .checkout-modal {\n              width: 100%;\n              height: 100%;\n              border-radius: 0;\n              padding-bottom: 0px;\n              padding-top: 0px;\n          }\n          .close-icon{\n            top: 10px;\n            right: 15px;\n          }\n\n          .iframe {\n            \n            height: 100%;\n         \n        }\n      }\n    ",document.head.appendChild(e)}}}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o](r,r.exports,t),r.exports}t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};t.r(o),t.d(o,{default:()=>r});var i=t(494);const r=i.A;return"undefined"!=typeof window&&(window.CheckoutSdk=i.A),o})());